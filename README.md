# TODO List 项目说明文档

一个功能完整的待办事项管理 Web 应用，使用 React + TypeScript + Vite 构建，支持语音输入、分类筛选、优先级排序等功能。

**在线访问**：https://zxuan-0000.github.io/todo-app-cursor/

**项目仓库**：https://github.com/ZXuan-0000/todo-app-cursor


## 1. 技术选型

### 编程语言
- **TypeScript**：理由：提供类型安全，减少运行时错误，提升代码可维护性和开发体验。

### 框架/库
- **React 18**：理由：组件化开发，生态成熟，Hooks API 简洁，适合快速构建交互式 UI。
- **Vite**：理由：极速的开发服务器，快速的 HMR（热模块替换），构建速度快。

### 数据库/存储
- **localStorage**：理由：轻量级，无需后端，数据持久化简单，适合单用户场景。
- **替代方案对比**：
  - 为什么不使用 IndexedDB：当前数据量小，localStorage 足够使用，且 API 更简单。
  - 为什么不使用后端数据库：这是一个纯前端项目，localStorage 可以满足需求，无需服务器成本。

### 其他技术
- **CSS3**：纯 CSS 实现样式，无 UI 框架依赖，保持项目轻量。
- **Web Speech API**：支持语音输入功能，提升用户体验。

## 2. 项目结构设计

### 整体架构
这是一个纯前端单页应用（SPA），采用组件化架构：
- **数据层**：使用 localStorage 进行数据持久化
- **业务逻辑层**：React 组件管理状态和交互
- **展示层**：组件化 UI，职责分离

### 目录结构
```
src/
├── components/          # UI 组件
│   ├── AddTodo.tsx     # 添加待办组件（包含语音输入）
│   ├── TodoList.tsx    # 待办列表组件
│   ├── TodoItem.tsx    # 单个待办项组件
│   └── TodoControls.tsx # 排序、筛选、导入导出控制组件
├── utils/              # 工具函数
│   ├── storage.ts      # 数据存储（localStorage、导入导出）
│   ├── sort.ts         # 排序逻辑
│   └── speechRecognition.ts # 语音识别封装
├── types.ts            # TypeScript 类型定义
├── App.tsx             # 主应用组件
├── App.css             # 应用样式
├── index.css           # 全局样式
└── main.tsx            # 应用入口
```

### 模块职责说明
- **components/**：可复用的 UI 组件，每个组件负责特定功能
- **utils/**：纯函数工具，不依赖 React，便于测试和复用
- **types.ts**：集中管理类型定义，保证类型一致性
- **App.tsx**：应用主组件，管理全局状态和组件协调

## 3. 需求细节与决策

### 描述是否必填？
- **决策**：描述为可选字段，用户可以选择是否添加描述。
- **实现**：使用 `showDescription` 状态控制描述输入框的显示/隐藏，默认隐藏以保持界面简洁。

### 已完成的任务如何显示？
- **UI 显示**：已完成的任务会显示删除线样式，复选框为选中状态，视觉上明显区分。
- **排序逻辑**：所有排序方式都会优先显示未完成的任务，已完成任务排在后面。

### 任务排序逻辑
- **默认排序**：按创建时间，未完成的优先显示。
- **可选排序方式**：
  - 按优先级：高 > 中 > 低，未完成优先
  - 按截止日期：有截止日期的优先，按日期升序
  - 按创建时间：最新的在前
- **实现**：所有排序都会确保未完成任务优先显示，提升用户体验。

### 扩展功能设计思路

一开始是按照基础功能去实现，能跑通并且测试没问题后，再逐步添加扩展功能和进阶功能，进阶功能我选择实现语言转文本。

#### 语音输入功能
- **设计思路**：使用 Web Speech API，支持语音输入标题和描述。
- **实现细节**：
  - 封装 `SpeechToText` 类处理浏览器兼容性（Chrome/Edge 支持）
  - 实时显示识别结果，支持手动停止
  - 错误处理：网络错误、浏览器不支持等情况

#### 数据导入导出
- **设计思路**：支持 JSON 格式导入导出，方便数据备份和迁移。
- **实现细节**：
  - 导出：生成带时间戳的 JSON 文件
  - 导入：验证文件格式，合并数据（避免 ID 冲突）

#### 分类和优先级
- **分类**：工作、学习、生活、其他
- **优先级**：高、中、低
- **筛选**：支持按分类筛选，快速找到特定类型的任务

#### 截止日期
- **功能**：可选设置截止日期
- **排序**：支持按截止日期排序，紧急任务优先显示

## 4. AI 使用说明

### 是否使用 AI 工具？
- **主要工具**：Cursor、ChatGPT

### 使用 AI 的环节

#### 代码生成
- 使用 Cursor 生成所有代码
- 这一版我选择用 Cursor 实现 0 代码实现，我想通过这种方式先熟悉整个系统架构到托管部署的过程。我给的 prompt 比较完善，所以 Cursor 生成的代码没有太大的问题，只在实现语音转文本的时候出现了浏览器检测不支持的问题。后面我想试着做网站托管，毕竟这是一个纯前端的项目，这样子也方便老师去查看。在 GitHub Pages 部署的时候引入的问题比较多。

#### Bug 定位
##### 语音转文本功能-浏览器显示不支持语音识别
- 问题出现在 Cursor 更新了代码之后，我首先怀疑是浏览器的问题，但是换了三个浏览器都不支持，于是我把这个问题报给 Cursor。
- Cursor告诉我了几个可能出现该问题的原因：① 某些浏览器在非 HTTPS 环境下可能不支持 ②浏览器版本过旧③ 操作系统可能阻止了浏览器访问麦克风 API
- 这难以定位到问题真正的原因，我认为浏览器侧的原因更好排查（而且换了三个浏览器，我更倾向于代码的问题），我在浏览器控制台去打印浏览器是否支持 Web Speech API 的信息。结果三个浏览器都显示支持，我把这个信息再报给 Cursor ，他排查是 TypeScript 类型检查影响了浏览器支持检测，然后修复代码和补充了报错日志，最后成功修复

#####  GitHub Pages 部署失败
- 我一开始按照官方文档的教程使用 Jekyll 创建 GitHub Pages 站点，然后报了一些 TypeScript 相关错误，主要集中在环境变量使用、未使用的导入以及潜在的空值引用上，我用 Cursor 进行修正后部署成功。
- 但是在浏览器输出 URL 后页面空白，等待了很长一段时间强制刷新还是空白，基本上可以排除是站点未发布的问题。我把这个问题反复报给 GPT 和Cursor ，修改了大量配置了之后还是没有解决，我之后又跟着官方文档的排查 Jekyll 错误，排查到一半的时候我收到了显示错误日志的邮件，根据内容说明 GitHub Pages 在尝试构建一个 Jekyll 站点时找不到目录，我把日志给 GPT，原来是因为我的项目是 React + Vite，和 Jekyll 天然冲突（Jekyll 默认忽略 React 的结构，导致文件丢失），然后我在仓库根目录下创建一个空文件去禁用 Jekyll，最后解决问题。

### AI 输出如何修改
- **示例 1**：AI 最初建议使用 `process.env.NODE_ENV` 判断环境，但发现不可靠，改为使用 Vite 的 `mode` 参数：
  ```typescript
  // AI 建议：base: process.env.NODE_ENV === 'production' ? '/todo-app-cursor/' : '/'
  // 实际使用：base: mode === 'production' ? '/todo-app-cursor/' : '/'
  ```

- **示例 2**：AI 建议的 GitHub Pages 部署方案，根据实际网络环境调整为手动部署或重试策略。

- **示例 3**：语音识别功能由 AI 提供基础实现，但根据实际需求添加了错误处理、浏览器兼容性检测等。

## 5. 运行与测试方式

### 本地运行方式

1. **安装依赖**：
```bash
npm install
```

2. **启动开发服务器**：
```bash
npm run dev
```
访问 `http://localhost:5173`

3. **构建生产版本**：
```bash
npm run build
```

4. **预览生产构建**：
```bash
npm run preview
```

5. **部署到 GitHub Pages**：
```bash
npm run deploy
```

### 已测试过的环境
- **Node.js**：v22.14.0
- **操作系统**：Windows 10/11
- **浏览器**：
  - Chrome（推荐，支持语音识别）
  - Edge（支持语音识别）
  - Firefox（基本功能正常，语音识别不支持）

### 已知问题与不足

1. **语音识别限制**：
   - 仅支持 Chrome/Edge 浏览器
   - 需要网络连接（使用 Google 服务）
   - 在某些网络环境下可能不稳定

2. **数据存储限制**：
   - localStorage 有大小限制（通常 5-10MB）
   - 数据仅存储在本地浏览器，换设备无法同步

3. **GitHub Pages 部署**：
   - 偶尔出现网络连接问题，需要重试
   - 部署后需要等待 1-2 分钟才能看到更新

4. **功能限制**：
   - 不支持多用户
   - 不支持数据云端同步
   - 不支持任务提醒通知

## 6. 总结与反思

### 如果有更多时间，你会如何改进？

1. **数据同步**：
   - 集成后端 API，支持多设备数据同步
   - 使用 IndexedDB 存储更大量数据
   - 添加数据加密功能

2. **用户体验**：
   - 添加任务提醒功能（浏览器通知）
   - 支持任务拖拽排序
   - 添加任务搜索功能
   - 支持任务标签（多标签）

3. **功能扩展**：
   - 任务子任务/清单功能
   - 任务模板功能
   - 数据统计和可视化（完成率、分类分布等）
   - 支持 Markdown 格式的描述

4. **技术优化**：
   - 添加单元测试和集成测试
   - 使用状态管理库（如 Zustand）管理复杂状态
   - 优化打包体积（代码分割、懒加载）
   - 添加 PWA 支持，支持离线使用

5. **UI/UX 改进**：
   - 支持暗色主题
   - 响应式设计优化（移动端适配）
   - 添加动画效果提升交互体验

### 你觉得这个实现的最大亮点是什么？

1. **完整的类型安全**：使用 TypeScript 确保类型安全，减少运行时错误。

2. **组件化设计**：清晰的组件职责分离，代码可维护性强。

3. **用户体验**：
   - 语音输入功能提升了输入效率
   - 多种排序和筛选方式满足不同需求
   - 现代化的 UI 设计，界面美观

4. **数据管理**：
   - 自动保存到 localStorage，无需手动保存
   - 支持导入导出，数据可迁移

5. **部署简单**：纯前端应用，部署到 GitHub Pages 零成本，访问方便。

6. **功能完整**：从基础的增删改查到高级的排序、筛选、分类、优先级、截止日期等功能一应俱全。

---



